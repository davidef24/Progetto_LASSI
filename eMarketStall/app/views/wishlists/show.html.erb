<p id="notice"><%= notice %></p>

<h1 class="font-weight-bold">My wishlist</h1>

<% if @wl_user.wishlist_items.empty? %>
  <div class="alert alert-warning mt-3">
    <p class="font-weight-bolder">No products found</p>
  </div>
<% else %>
<table>
  <thead>
    <tr>
      <th>Verified</th>
      <th><%= link_to "Title", products_path(sort: "title") %></th>
      <th>Description</th>
      <th><%= link_to "Price", products_path(sort: "price") %></th>
      <th><%= link_to "Category", products_path(sort: "category") %></th>
      <th>Availability</th>
      <th><%= link_to "Release date", products_path(sort: "published_at") %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @wl_user.wishlist_items.each do |wishlist_item| %>
        <tr>
          <% if wishlist_item.product.availability > 0 && wishlist_item.product.user_id != @current_user.id && !wishlist_item.product.removed_from_seller%>
          <% if wishlist_item.product.verified %>
          <td><span style="color: green; font-size: 20px;">&#x2713;</span></td>
          <% else %>
          <td><span style="color: red; font-size: 20px;">&#x2717;</span></td>
          <% end %>
          <td><%= wishlist_item.product.title %></td>
          <td><%= wishlist_item.product.description %></td>
          <td><%= wishlist_item.product.price %></td>
          <td><%= wishlist_item.product.category %></td>
          <td><%= wishlist_item.product.availability %></td>
          <td><%= wishlist_item.product.published_at %></td>
          <td><%= link_to 'Show', wishlist_item.product %></td>
          <% if can? :buy, wishlist_item.product%>
          <td><%=button_to "Add to cart", cart_items_path(:product_id => wishlist_item.product.id) %></td>
          <% end %>
          <td><%= link_to 'Remove from wishlist', remove_from_wishlist_path(wishlist_item.product.id), method: :delete %></td>
          <% end%>
        </tr>
    <% end %>
  </tbody>
</table>
<% end %>