<h1 class="font-weight-bold">My cart</h1>
<% if @cart.cart_items.size == 0%>
  <div class="alert alert-warning mt-3">
    <h3 class="font-weight-bolder">Your cart is empty</h3>
    <%= link_to "add products", products_path %>
  </div>
<%else%>
<h3>Your cart contains:</h3>
<ul>
  <% @cart.cart_items.each do |cart_el| %>
    <li>
      Item: <%= cart_el.product.title %>
      / Price: <%= number_to_currency(cart_el.product.price) %>
      / Quantity: <%= cart_el.quantity %>
      / Total Price: <%= number_to_currency(cart_el.total_price) %>
      <% if cart_el.product.verified == false %>
        <div class="alert alert-danger mt-3">
          <p class="font-weight-bolder">This product has not been verified by an admin yet. This means that there is no quality assurance for the listing.</p>
        </div>
      <% end %>


      <!-- See cartItem section below for explanation of cart_item links -->
      <ul>
        <li>
          <%= link_to "Add one", cart_item_increase_path(cart_item_id: cart_el), method: :post %>
          <%= link_to "Reduce one", cart_item_decrease_path(cart_item_id: cart_el), method: :post %>
        </li>
        <li>
          <%= link_to "Remove item", cart_item_path(cart_el), method: :delete %>
        </li>
      </ul>
    </li>
  <% end %>
</ul>

<h3>Sub total: <%= number_to_currency(@cart.sub_total) %></h3>

<!-- See Order section below for explanation of new_order_path -->
<%= button_to "Proceed to checkout", orders_create_path %><br>

<%= link_to "Keep adding products", products_path %> <br>

<%= link_to "Empty cart", cart_path(@current_cart), method: :delete, data: { confirm: "Are you sure?" } %>
<%end%>
